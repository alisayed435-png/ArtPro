import{o as A,p as k,q as T,s as R,j as e,L as u,B as p,S as j,P as w,f as v,h as c,k as n,t as l,i as d,l as x,v as y,m as N,w as D,x as m}from"./index-CB69qdz3.js";import{u as h,P as g,E as O,C as b}from"./error-state-CUjngZ8i.js";import{S as q}from"./status-badge-DMxFad8V.js";import{T as f}from"./truck-CbOuRhY1.js";import{T as P,a as _}from"./trending-up-BXu6Ic65.js";import{A as C}from"./arrow-right-DkCKsIbU.js";import{C as F}from"./circle-alert-BfeTLZt1.js";import{C as L}from"./circle-check-9nVCa0-S.js";function S(){return h({queryKey:["analytics","dashboard"],queryFn:()=>A.getDashboard(),staleTime:6e4})}function J(){return h({queryKey:["orders","recent"],queryFn:()=>k.getOrders({page:1,pageSize:5}),staleTime:3e4})}function B(){return h({queryKey:["activity","recent"],queryFn:()=>T.getRecentActivity(10),staleTime:3e4})}function K(){return h({queryKey:["system","status"],queryFn:()=>R.getStatus(),staleTime:1e4,refetchInterval:3e4})}function o({title:s,value:r,change:a,icon:t,loading:i}){return i?e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(l,{className:"h-4 w-24"}),e.jsx(l,{className:"h-8 w-8 rounded"})]}),e.jsxs(d,{children:[e.jsx(l,{className:"h-8 w-20 mb-1"}),e.jsx(l,{className:"h-3 w-16"})]})]}):e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground",children:s}),e.jsx("div",{className:"h-8 w-8 rounded bg-primary/10 flex items-center justify-center",children:t})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r}),a!==void 0&&e.jsxs("p",{className:y("text-xs flex items-center gap-1 mt-1",a>=0?"text-green-600":"text-red-600"),children:[a>=0?e.jsx(P,{className:"h-3 w-3"}):e.jsx(_,{className:"h-3 w-3"}),Math.abs(a),"% from last month"]})]})]})}function z(){const{data:s,isLoading:r,error:a}=K();return a?e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(x,{className:"text-lg",children:"System Status"})}),e.jsx(d,{children:e.jsx("div",{className:"text-sm text-destructive",children:"Failed to load status"})})]}):e.jsxs(c,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-lg",children:"System Status"}),e.jsx(N,{children:"Real-time service monitoring"})]}),!r&&s&&e.jsx(q,{status:s.overall})]}),e.jsxs(d,{children:[r?e.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"h-4 w-32"}),e.jsx(l,{className:"h-4 w-16"})]},t))}):e.jsx("div",{className:"space-y-3",children:s==null?void 0:s.services.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:y("h-2 w-2 rounded-full",t.status==="operational"?"bg-green-500":t.status==="degraded"?"bg-yellow-500":"bg-red-500")}),e.jsx("span",{className:"text-sm",children:t.name})]}),t.latency&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.latency,"ms"]})]},t.id))}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Uptime: ",(s==null?void 0:s.uptime)||99.9,"%"]}),e.jsx(u,{to:"/status",children:e.jsxs(p,{variant:"ghost",size:"sm",className:"h-7 text-xs",children:["View Details",e.jsx(C,{className:"ml-1 h-3 w-3"})]})})]})]})]})}function I(){const{data:s,isLoading:r,error:a}=B(),t=i=>{switch(i.type){case"order_created":case"order_updated":return e.jsx(j,{className:"h-4 w-4 text-blue-500"});case"order_shipped":return e.jsx(f,{className:"h-4 w-4 text-green-500"});case"artwork_uploaded":case"artwork_approved":return e.jsx(w,{className:"h-4 w-4 text-purple-500"});case"compliance_sync":return e.jsx(v,{className:"h-4 w-4 text-emerald-500"});default:return e.jsx(b,{className:"h-4 w-4 text-gray-500"})}};return a?e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(x,{className:"text-lg",children:"Recent Activity"})}),e.jsx(d,{children:e.jsx("div",{className:"text-sm text-destructive",children:"Failed to load activity"})})]}):e.jsxs(c,{children:[e.jsxs(n,{children:[e.jsx(x,{className:"text-lg",children:"Recent Activity"}),e.jsx(N,{children:"Latest updates across your organization"})]}),e.jsx(d,{children:r?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(i=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(l,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(l,{className:"h-4 w-3/4"}),e.jsx(l,{className:"h-3 w-1/2"})]})]},i))}):e.jsx("div",{className:"space-y-4",children:s==null?void 0:s.slice(0,6).map(i=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0",children:t(i)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:i.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i.description}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[D(i.timestamp),i.userName&&` â€¢ ${i.userName}`]})]})]},i.id))})})]})}function W(){const{data:s,isLoading:r}=S();if(r)return e.jsxs(c,{children:[e.jsx(n,{children:e.jsx(l,{className:"h-5 w-32"})}),e.jsx(d,{className:"space-y-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(l,{className:"h-4 w-24"}),e.jsx(l,{className:"h-6 w-12"})]},t))})]});const a=s==null?void 0:s.orders.ordersByStatus;return e.jsxs(c,{children:[e.jsxs(n,{children:[e.jsx(x,{className:"text-lg",children:"Order Summary"}),e.jsx(N,{children:"Current order status breakdown"})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm",children:"Pending"})]}),e.jsx(m,{variant:"secondary",children:(a==null?void 0:a.pending)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm",children:"In Production"})]}),e.jsx(m,{variant:"info",children:(a==null?void 0:a.in_production)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm",children:"Ready to Ship"})]}),e.jsx(m,{variant:"warning",children:(a==null?void 0:a.ready_to_ship)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Delivered"})]}),e.jsx(m,{variant:"success",children:(a==null?void 0:a.delivered)||0})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(u,{to:"/orders",children:e.jsxs(p,{variant:"outline",size:"sm",className:"w-full",children:["View All Orders",e.jsx(C,{className:"ml-2 h-4 w-4"})]})})})]})]})}function X(){const{data:s,isLoading:r,error:a,refetch:t}=S();return a?e.jsxs("div",{children:[e.jsx(g,{title:"Dashboard",subtitle:"Overview of your packaging operations"}),e.jsx(O,{title:"Failed to load dashboard",message:"We couldn't load your dashboard data. Please try again.",onRetry:()=>t()})]}):e.jsxs("div",{children:[e.jsx(g,{title:"Dashboard",subtitle:"Overview of your packaging operations",actions:e.jsx(u,{to:"/orders",children:e.jsxs(p,{children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"New Order"]})})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[e.jsx(o,{title:"Total Orders",value:(s==null?void 0:s.orders.totalOrders)||0,change:s==null?void 0:s.orders.ordersChange,icon:e.jsx(j,{className:"h-4 w-4 text-primary"}),loading:r}),e.jsx(o,{title:"Open Approvals",value:(s==null?void 0:s.artwork.totalSubmissions)||0,icon:e.jsx(w,{className:"h-4 w-4 text-primary"}),loading:r}),e.jsx(o,{title:"Shipments (MTD)",value:(s==null?void 0:s.compliance.transfersCompleted)||0,icon:e.jsx(f,{className:"h-4 w-4 text-primary"}),loading:r}),e.jsx(o,{title:"Compliance Score",value:`${(s==null?void 0:s.compliance.complianceScore)||0}%`,icon:e.jsx(v,{className:"h-4 w-4 text-primary"}),loading:r})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(I,{})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(z,{}),e.jsx(W,{})]})]})]})}export{X as DashboardPage,S as useDashboardAnalytics,B as useRecentActivity,J as useRecentOrders,K as useSystemStatus};
