import{c as x,s as D,f as L,aH as P,j as e,B as y,H as O,v as o,h as r,i as l,A as T,k as f,l as v,m as N,al as g,V as U,t as d,as as w,at as k,au as S,av as A,x as C}from"./index-CB69qdz3.js";import{u as R,P as I,E as B,T as E,C as F}from"./error-state-CUjngZ8i.js";import{C as j}from"./circle-check-9nVCa0-S.js";import{Z as H}from"./zap-Dtehr6er.js";import{C as G}from"./circle-x-nw5pRbvr.js";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=x("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=x("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=x("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=x("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);function W(){return R({queryKey:["system","status"],queryFn:D.getStatus,refetchInterval:1e4})}function ae(){return R({queryKey:["system","events"],queryFn:D.getEvents,refetchInterval:3e4})}function Z(s){return{operational:{color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-900/30",label:"Operational",icon:j},degraded:{color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-100 dark:bg-yellow-900/30",label:"Degraded",icon:E},outage:{color:"text-red-600 dark:text-red-400",bg:"bg-red-100 dark:bg-red-900/30",label:"Outage",icon:G},maintenance:{color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-100 dark:bg-blue-900/30",label:"Maintenance",icon:F}}[s]}function _({service:s}){const t=Z(s.status),c=t.icon,n=s.icon;return e.jsx(r,{children:e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-muted rounded-lg",children:e.jsx(n,{className:"h-5 w-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]}),e.jsxs("div",{className:o("flex items-center gap-1.5",t.color),children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:t.label})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{children:e.jsxs(k,{children:[e.jsx(S,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(P,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsxs("span",{children:[s.uptime.toFixed(2),"%"]})]})}),e.jsx(A,{children:"30-day uptime"})]})}),s.latency&&e.jsx(w,{children:e.jsxs(k,{children:[e.jsx(S,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(H,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsxs("span",{children:[s.latency,"ms"]})]})}),e.jsx(A,{children:"Average latency"})]})})]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:30}).map((h,i)=>{const m=Math.random()>.05;return e.jsx("div",{className:o("w-1 h-4 rounded-sm",m?"bg-green-500":"bg-red-500")},i)})})]})]})})}function J({incident:s}){const t={minor:{color:"text-yellow-600",bg:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-200 dark:border-yellow-800"},major:{color:"text-orange-600",bg:"bg-orange-100 dark:bg-orange-900/30",border:"border-orange-200 dark:border-orange-800"},critical:{color:"text-red-600",bg:"bg-red-100 dark:bg-red-900/30",border:"border-red-200 dark:border-red-800"}},c={investigating:"Investigating",identified:"Identified",monitoring:"Monitoring",resolved:"Resolved"},n=t[s.severity];return e.jsx("div",{className:o("p-4 rounded-lg border",n.border,n.bg),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:s.status==="resolved"?"secondary":"default",children:c[s.status]}),e.jsx(C,{variant:"outline",className:"capitalize",children:s.severity})]}),e.jsx("h3",{className:"font-medium mt-2",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Affected: ",s.affectedServices.join(", ")]})]}),e.jsx("div",{className:"text-right text-sm text-muted-foreground",children:e.jsx("p",{children:T(s.createdAt)})})]})})}function X(){return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((s,t)=>e.jsx(r,{children:e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-9 w-9 rounded-lg"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"h-5 w-24"}),e.jsx(d,{className:"h-4 w-32"})]})]}),e.jsx(d,{className:"h-5 w-20"})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx(d,{className:"h-4 w-16"}),e.jsx(d,{className:"h-4 w-40"})]})]})},t))})})}function re(){var p,b;const{data:s,isLoading:t,isError:c,refetch:n,dataUpdatedAt:h}=W(),i=[{name:"Web Application",description:"Customer portal and admin dashboard",status:"operational",uptime:99.98,latency:45,icon:Q},{name:"API Services",description:"REST API and webhooks",status:"operational",uptime:99.95,latency:120,icon:K},{name:"Database",description:"Primary data storage",status:"operational",uptime:99.99,latency:8,icon:M},{name:"METRC Integration",description:"Cannabis tracking system sync",status:((b=(p=s==null?void 0:s.services)==null?void 0:p.find(a=>a.name.toLowerCase().includes("metrc")))==null?void 0:b.status)==="operational"?"operational":"degraded",uptime:99.87,latency:350,icon:L},{name:"File Storage",description:"Artwork and document storage",status:"operational",uptime:99.99,icon:M},{name:"Email Services",description:"Notifications and alerts",status:"operational",uptime:99.92,icon:P}],m=[{id:"1",title:"Elevated API response times",status:"resolved",severity:"minor",createdAt:new Date(Date.now()-864e5*2),updatedAt:new Date(Date.now()-864e5*2+36e5),affectedServices:["API Services"]}],u=i.every(a=>a.status==="operational"),q=i.reduce((a,z)=>a+z.uptime,0)/i.length;return c?e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{title:"System Status",description:"Real-time service health and incident tracking"}),e.jsx(B,{title:"Failed to load system status",description:"There was an error loading system status. Please try again.",onRetry:n})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{title:"System Status",description:"Real-time service health and incident tracking",action:e.jsxs(y,{variant:"outline",onClick:()=>n(),children:[e.jsx(O,{className:o("mr-2 h-4 w-4",t&&"animate-spin")}),"Refresh"]})}),e.jsx(r,{className:o("border-2",u?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20"),children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[u?e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/50 rounded-full",children:e.jsx(j,{className:"h-8 w-8 text-green-600"})}):e.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/50 rounded-full",children:e.jsx(E,{className:"h-8 w-8 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:u?"All Systems Operational":"Partial Service Degradation"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",h?T(new Date(h)):"Just now"]})]})]}),e.jsxs("div",{className:"text-center sm:text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[q.toFixed(2),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"30-day uptime"})]})]})})}),t?e.jsx(X,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Service Status"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(a=>e.jsx(_,{service:a},a.name))})]}),e.jsxs(r,{children:[e.jsxs(f,{children:[e.jsx(v,{children:"Incidents"}),e.jsx(N,{children:"Recent and ongoing incidents"})]}),e.jsx(l,{children:m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(j,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium",children:"No Active Incidents"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"All systems are running smoothly"})]}):e.jsx("div",{className:"space-y-4",children:m.map(a=>e.jsx(J,{incident:a},a.id))})})]}),e.jsxs(r,{children:[e.jsxs(f,{children:[e.jsx(v,{children:"Scheduled Maintenance"}),e.jsx(N,{children:"Upcoming planned maintenance windows"})]}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[e.jsx(V,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Database Maintenance Window"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Scheduled for Saturday, 2:00 AM - 4:00 AM PST. Brief service interruptions may occur during this window."}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm",children:[e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[e.jsx(F,{className:"h-4 w-4 inline mr-1"}),"In 3 days"]}),e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Duration: 2 hours"})]})]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(r,{children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:"99.95%"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Overall Uptime"}),e.jsx(g,{value:99.95,className:"mt-3"})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:"124ms"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Avg Response Time"}),e.jsx(g,{value:75,className:"mt-3"})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Active Incidents"}),e.jsx(g,{value:100,className:"mt-3"})]})})]})]}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Stay Informed"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subscribe to receive status updates via email or SMS"})]}),e.jsxs(y,{children:["Subscribe to Updates",e.jsx(U,{className:"ml-2 h-4 w-4"})]})]})})})]})}export{re as StatusPage,ae as useSystemEventsQuery,W as useSystemStatusQuery};
